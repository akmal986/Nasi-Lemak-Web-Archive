function xProModal(e,t){if(document.querySelector("body > .brx-body.iframe"))return;let o=!1;null!=t.isLooping&&(o=!0);let n=!0,i=!1,r=new Date().getTime(),a=!!localStorage&&!!localStorage["x-"+e.id+"-last-shown-time"]&&JSON.parse(localStorage["x-"+e.id+"-last-shown-time"]);function s(t){27===t.keyCode&&xCloseModal(e.id)}function l(e,o){switch(t.show_again.type){case"never":if(!1!==a)return;break;case"after":var n=parseInt(t.show_again.options.days),i=parseInt(t.show_again.options.hours);if((r-a)/864e5<n+i/24)return;break;case"evergreen":if(document.getElementById(e).querySelector(".brxe-xcountdown")&&localStorage&&localStorage["x-countdown-"+document.getElementById(e).querySelector(".brxe-xcountdown").getAttribute("data-x-id")+"-end-times"]&&JSON.parse(localStorage["x-countdown-"+document.getElementById(e).querySelector(".brxe-xcountdown").getAttribute("data-x-id")+"-end-times"])-new Date().getTime()<=0)return}MicroModal.show(e,o)}sessionStorage&&sessionStorage["x-"+e.id+"-last-shown-time"]&&JSON.parse(sessionStorage["x-"+e.id+"-last-shown-time"])&&t.show_once_session&&(i=!0),e.addEventListener("x_modal:open",function(){"false"!==t.escToClose&&document.addEventListener("keydown",s),window.dispatchEvent(new Event("resize")),"false"!==t.hashToClose&&e.querySelectorAll("a[href*='#']:not(.menu-item-has-children > a)").forEach(t=>{t.addEventListener("click",t=>{xCloseModal(e.id)})}),e.querySelector(".brxe-xreadmoreless")&&e.querySelectorAll(".brxe-xreadmoreless").forEach(t=>{i||(t.querySelector(".x-read-more_content").style.removeProperty("height"),t.querySelector(".x-read-more_content").style.removeProperty("max-height"),t.querySelector(".x-read-more_content").classList.remove("x-read-more_not-collapsable"),setTimeout(function(){t.hasAttribute("data-x-fade")&&t.classList.add("x-read-more_fade"),window.dispatchEvent(new Event("resize")),doExtrasReadmore(e),t.style.opacity=1},100))}),e.querySelectorAll("[data-x-modal-close]").forEach(t=>{t.addEventListener("click",t=>{(!t.currentTarget.classList.contains("x-modal_backdrop")||t.target===t.currentTarget)&&xCloseModal(e.id)})}),i=!0}),e.addEventListener("x_modal:close",function(){"false"!==t.escToClose&&document.removeEventListener("keydown",s)}),Object.values(t.triggers).forEach(r=>{let a=null!=r.options.delay?r.options.delay:0;if("pageLoad"===r.type&&window.addEventListener("load",function(){setTimeout(function(){(!1===i||!1===t.show_once&&!1===t.show_once_session)&&l(e.id,t.rawConfig)},r.options.delay)}),"element_click"===r.type){function s(o){o.preventDefault(),e.addEventListener("x_modal:close",function(){document.querySelectorAll(r.options.selector).forEach(e=>{e.classList.contains("brxe-xburgertrigger")&&(e.setAttribute("aria-expanded","false"),e.querySelector(".x-hamburger-box").classList.remove("is-active"))})}),!1===i||!1===t.show_once&&!1===t.show_once_session?setTimeout(()=>{MicroModal.show(e.id,t.rawConfig),i=!0},a):document.querySelector(r.options.selector)&&document.querySelectorAll(r.options.selector).forEach(e=>{e.removeEventListener("click",s)})}!0===r.options.ariaControls&&(o?e.closest(".brxe-"+t.isLooping).querySelectorAll(r.options.selector).forEach(t=>{t.setAttribute("aria-controls",e.id),t.hasAttribute("aria-haspopup")||t.setAttribute("aria-haspopup","dialog")}):document.querySelectorAll(r.options.selector).forEach(t=>{t.setAttribute("aria-controls",e.id),t.hasAttribute("aria-haspopup")||t.setAttribute("aria-haspopup","dialog")})),document.querySelector(r.options.selector)&&(o?e.closest(".brxe-"+t.isLooping).querySelectorAll(r.options.selector).forEach(e=>{e.addEventListener("click",s)}):document.querySelectorAll(r.options.selector).forEach(e=>{e.addEventListener("click",s)}))}if("element_hover"===r.type){function c(){!1===i||!1===t.show_once&&!1===t.show_once_session?setTimeout(()=>{MicroModal.show(e.id,t.rawConfig),i=!0},a):document.querySelector(r.options.selector)&&(o?e.closest(".brxe-"+t.isLooping).querySelector(r.options.selector).removeEventListener("mouseover",c):document.querySelector(r.options.selector).removeEventListener("mouseover",c))}document.querySelector(r.options.selector)&&(o?e.closest(".brxe-"+t.isLooping).querySelector(r.options.selector).addEventListener("mouseover",c):document.querySelector(r.options.selector).addEventListener("mouseover",c))}if("time_inactive"===r.type){var d;function u(){clearTimeout(d),d=setTimeout(function(){!0===n&&(!1===i||!1===t.show_once&&!1===t.show_once_session)&&(l(e.id,t.rawConfig),n=!1)},1e3*parseInt(r.options.time))}window.onload=u,window.onmousemove=u,window.onmousedown=u,window.ontouchstart=u,window.ontouchmove=u,window.onclick=u,window.onkeydown=u,window.addEventListener("scroll",u,!0)}if("page_views"===r.type){let f=localStorage&&localStorage["x-"+e.id+"-page-views"]?parseInt(localStorage["x-"+e.id+"-page-views"]):0;f++,localStorage&&(localStorage["x-"+e.id+"-page-views"]=f),r.options.views==f&&(localStorage&&(localStorage["x-"+e.id+"-page-views"]=0),(!1===i||!1===t.show_once&&!1===t.show_once_session)&&l(e.id,t.rawConfig))}if("pageScroll"===r.type){let h,g=!1,m=function(){!g&&(g=!0,setTimeout(()=>{(h=~~window.pageYOffset)>=parseInt(r.options.scrollAmount)&&((!1===i||!1===t.show_once&&!1===t.show_once_session)&&l(e.id,t.rawConfig),document.removeEventListener("scroll",m)),g=!1},100))};document.addEventListener("scroll",m)}if("scrolled_to_element"===r.type&&document.querySelector(r.options.selector)){let p=new IntersectionObserver(function(o,n){o.forEach(o=>{0!=o.intersectionRatio&&(!1===i||!1===t.show_once&&!1===t.show_once_session?(n.unobserve(o.target),setTimeout(()=>{l(e.id,t.rawConfig)},a)):n.unobserve(o.target))})});p.observe(document.querySelector(r.options.selector))}if("exitIntent"===r.type&&n&&document.documentElement.addEventListener("mouseleave",o=>{o.toElement||o.relatedTarget||!n||!1!==i&&(!1!==t.show_once||!1!==t.show_once_session)||(l(e.id,t.rawConfig),n=!1)}),"pageLoadQuery"===r.type){let v=window.location.search;v.includes(r.options.params)&&setTimeout(function(){(!1===i||!1===t.show_once&&!1===t.show_once_session)&&l(e.id,t.rawConfig)},r.options.delay)}}),localStorage&&(localStorage["x-"+e.id+"-last-shown-time"]=JSON.stringify(r)),t.show_once_session&&sessionStorage&&(sessionStorage["x-"+e.id+"-last-shown-time"]=JSON.stringify(r))}function xProModalConfig(e,t={}){let o=e.getAttribute("data-x-modal"),n=o?JSON.parse(o):{};return n.rawConfig.onShow=function(e){e.dispatchEvent(new Event("x_modal:open")),n.rawConfig.disableScroll&&"undefined"!=typeof lenis&&lenis.stop()},n.rawConfig.onClose=function(e){e.dispatchEvent(new Event("x_modal:close")),n.rawConfig.disableScroll&&"undefined"!=typeof lenis&&lenis.start(),e.querySelectorAll("iframe:not(media-provider iframe)").forEach(e=>{e.src=e.src}),e.querySelectorAll("media-player").forEach(e=>{e.pause()}),e.querySelectorAll("video:not(media-provider video)").forEach(e=>{e.pause()}),e.querySelectorAll("form").forEach(e=>{e.reset()})},n}function xOpenModal(e){document.getElementById(e);let t=document.getElementById(e).getAttribute("data-x-modal"),o=t?JSON.parse(t):{};return o.rawConfig.onShow=function(e){e.dispatchEvent(new Event("x_modal:open"))},o.rawConfig.onClose=function(e){e.dispatchEvent(new Event("x_modal:close"))},MicroModal.show(e,o.rawConfig)}function xCloseModal(e){let t=document.getElementById(e),o=t.getAttribute("data-x-modal"),n=o?JSON.parse(o):{};return MicroModal.close(e,n.rawConfig)}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).MicroModal=t()}(this,function(){"use strict";function e(e,t){for(let o=0;o<t.length;o++){let n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);let n=Object.prototype.toString.call(e).slice(8,-1);return("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}let n,i,r,a,s,l=(n=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],i=function(){function o(e){let n=e.targetModal,i=e.triggers,r=void 0===i?[]:i,a=e.onShow,s=e.onClose,l=e.openTrigger,c=e.closeTrigger,d=e.openClass,u=e.disableScroll,f=e.disableFocus,h=e.awaitCloseAnimation,g=e.awaitOpenAnimation,m=e.debugMode;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,o),this.modal=document.getElementById(n),this.config={debugMode:void 0!==m&&m,disableScroll:void 0!==u&&u,openTrigger:void 0===l?"data-micromodal-trigger":l,closeTrigger:void 0===c?"data-micromodal-close":c,openClass:void 0===d?"is-open":d,onShow:void 0===a?function(){}:a,onClose:void 0===s?function(){}:s,awaitCloseAnimation:void 0!==h&&h,awaitOpenAnimation:void 0!==g&&g,disableFocus:void 0!==f&&f},r.length>0&&this.registerTriggers.apply(this,t(r)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}let i,r,a;return i=o,r=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];o.filter(Boolean).forEach(function(t){t.addEventListener("click",function(t){return e.showModal(t)})})}},{key:"showModal",value:function(){let e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){let o=function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()};this.modal.addEventListener("animationend",o,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){let o=this.config.openClass;this.modal.addEventListener("animationend",function e(){t.classList.remove(o),t.removeEventListener("animationend",e,!1)},!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){let t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:"",height:""});break;case"disable":Object.assign(t.style,{overflow:"hidden",height:"100%"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){(e.target.hasAttribute(this.config.closeTrigger)||e.target.parentNode.hasAttribute(this.config.closeTrigger))&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}},{key:"onKeydown",value:function(e){9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){let e=this.modal.querySelectorAll(n);return Array.apply(void 0,t(e))}},{key:"setFocusToFirstNode",value:function(){let e=this;if(!this.config.disableFocus){let t=this.getFocusableNodes();if(0!==t.length){let o=t.filter(function(t){return!t.hasAttribute(e.config.closeTrigger)});o.length>0&&o[0].focus(),0===o.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){let t=this.getFocusableNodes();if(0!==t.length){if(t=t.filter(function(e){return null!==e.offsetParent}),this.modal.contains(document.activeElement)){let o=t.indexOf(document.activeElement);e.shiftKey&&0===o&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&o===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}}],e(i.prototype,r),a&&e(i,a),o}(),r=null,a=function(e){if(!document.getElementById(e))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},s=function(e,t){var o;if(e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>')),!t)return!0;for(let n in t)a(n);return!0},{init:function(e){let o=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),n=t(document.querySelectorAll("[".concat(o.openTrigger,"]"))),a=function(e,t){let o=[];return e.forEach(function(e){let n=e.attributes[t].value;void 0===o[n]&&(o[n]=[]),o[n].push(e)}),o}(n,o.openTrigger);if(!0!==o.debugMode||!1!==s(n,a))for(let l in a){let c=a[l];o.targetModal=l,o.triggers=t(c),r=new i(o)}},show:function(e,t){let o=t||{};o.targetModal=e,!0===o.debugMode&&!1===a(e)||(r&&r.removeEventListeners(),(r=new i(o)).showModal())},close:function(e){e?r.closeModalById(e):r.closeModal()}});return"undefined"!=typeof window&&(window.MicroModal=l),l}),document.addEventListener("DOMContentLoaded",function(e){if(!bricksIsFrontend)return;let t=function(e){let t=e.querySelectorAll(".x-modal");t.forEach(e=>{""===e.id&&e.setAttribute("id","x-modal_"+e.getAttribute("data-x-id")),e.querySelector(".brxe-xreadmoreless")&&(e.querySelector(".brxe-xreadmoreless").style.opacity=0),xProModal(e,xProModalConfig(e)),xProModalConfig(e).customAriaLabel?e.querySelector(".x-modal_container").setAttribute("aria-label",xProModalConfig(e).customAriaLabel):e.querySelector("h1,h2,h3,h4,h6")?e.querySelectorAll("h1,h2,h3,h4,h6").forEach((t,o)=>{0===o&&(t.getAttribute("id")?e.querySelector(".x-modal_container").setAttribute("aria-labelledby",t.getAttribute("id")):e.querySelector(".x-modal_container").setAttribute("aria-label",t.innerText))}):e.querySelector(".x-modal_container").setAttribute("aria-label","modal")})};function o(e){if(void 0===e.detail.queryId){if(void 0===e.detail.popupElement)return;t(e.detail.popupElement)}setTimeout(()=>{document.querySelector(".brxe-"+e.detail.queryId)&&t(document.querySelector(".brxe-"+e.detail.queryId).parentElement)},0)}t(document),document.addEventListener("bricks/ajax/load_page/completed",o),document.addEventListener("bricks/ajax/pagination/completed",o),document.addEventListener("bricks/ajax/popup/loaded",o),document.addEventListener("bricks/ajax/end",o),window.doExtrasModal=t,window.xOpenModal=xOpenModal,window.xCloseModal=xCloseModal,"undefined"!=typeof bricksextras&&(bricksextras.modal={close(e){let t=e?.target||!1;t&&xCloseModal(t.id)},open(e){let t=e?.target||!1;t&&xOpenModal(t.id)}})});