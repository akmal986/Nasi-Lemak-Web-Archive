function xHeaderSearch(){if(document.querySelector("body > .brx-body.iframe"))return;let e,r,t=s(function r(){clearTimeout(e),e=setTimeout(n,50)},50),a=s(function e(){clearTimeout(r),r=setTimeout(n,50)},50);function s(e,r){let t;return function(){let a=this,s=arguments;clearTimeout(t),t=setTimeout(()=>e.apply(a,s),r)}}function n(){document.querySelector("#brx-header .x-search-form [data-brx-ls-wrapper]")&&document.querySelector("#brx-header div.x-search-form").style.setProperty("--x-header-height",document.querySelector("#brx-header .x-search-form [data-brx-ls-wrapper]").getBoundingClientRect().top+"px")}document.querySelector("#brx-header")&&document.querySelector("#brx-header div.x-search-form")&&(document.addEventListener("bricks/ajax/query_result/displayed",n),n()),document.querySelectorAll(".brxe-xheadersearch").forEach(e=>{function r(r){let t;r.preventDefault(),"false"===e.querySelector('[class^="x-header-search_toggle"]').getAttribute("aria-expanded")?(e.querySelectorAll('[class^="x-header-search_toggle"]:not(.x-header-search_toggle-open-text)').forEach(r=>{r.setAttribute("aria-expanded","true"),document.body.classList.add("x-header-search-open"),e.dispatchEvent(new Event("x_header_search:open")),document.addEventListener("keydown",n),document.addEventListener("click",l)}),t=e.querySelector("input[type=search"),t&&setTimeout(function(){t.focus(),t.setSelectionRange(t.value.length,t.value.length)},100)):s()}function s(r=!0){e.querySelectorAll('[class^="x-header-search_toggle"]:not(.x-header-search_toggle-open-text)').forEach(r=>{r.setAttribute("aria-expanded","false"),document.body.classList.remove("x-header-search-open"),e.dispatchEvent(new Event("x_header_search:close")),document.removeEventListener("keydown",n),document.removeEventListener("click",l)}),setTimeout(()=>{if(e.querySelector(".brx-ls-active")&&e.querySelector(".brx-ls-active").classList.remove("brx-ls-active"),e.querySelector(".brxe-filter-search")&&(e.querySelector("input[data-brx-filter]")&&(e.querySelector("input[data-brx-filter]").value=""),e.querySelector(".brxe-filter-search").hasAttribute("id"))){let r=e.querySelector(".brxe-filter-search").id.split("-")[1];bricksData.filterInstances[r]&&(bricksData.filterInstances[r].currentValue="")}},200),r&&e.querySelector(".x-header-search_toggle-open").focus()}function n(e){("Escape"===e.key||"Esc"===e.key)&&s()}function l(e){e.target.hasAttribute("data-brx-ls-wrapper")&&s(!1),e.target.closest(".brxe-xheadersearch")||s(!1)}e.querySelector(".x-header-search_toggle-open")&&e.querySelector(".x-header-search_toggle-open").addEventListener("click",r),e.querySelector(".x-header-search_toggle-close")&&e.querySelector(".x-header-search_toggle-close").addEventListener("click",r);let c=e.querySelectorAll("a[href], button, input, textarea, select, details, [tabindex]");c.length&&(c[c.length-1].addEventListener("keydown",e=>{e.shiftKey||"Tab"!==e.key||e.target.classList.contains("x-header-search_toggle-open")||(e.preventDefault(),c[0].focus())}),c[0].addEventListener("keydown",e=>{e.shiftKey&&"Tab"===e.key&&!e.target.classList.contains("x-header-search_toggle-open")&&(e.preventDefault(),c[c.length-1].focus())})),e.hasAttribute("data-x-prevent-scroll")&&(e.addEventListener("x_header_search:open",()=>{document.documentElement.classList.add("x-header-search_prevent-scroll_"+e.id),"undefined"!=typeof lenis&&lenis.stop(),e.querySelector("[data-brx-ls-wrapper] > .brxe-container")&&(window.addEventListener("resize",t,!1),window.addEventListener("scroll",a,!1),e.querySelector("[data-brx-ls-wrapper] > .brxe-container").addEventListener("scroll",a,!1))}),e.addEventListener("x_header_search:close",()=>{document.documentElement.classList.remove("x-header-search_prevent-scroll_"+e.id),"undefined"!=typeof lenis&&lenis.start(),e.querySelector("[data-brx-ls-wrapper] > .brxe-container")&&(window.removeEventListener("resize",t,!1),window.removeEventListener("scroll",a,!1),e.querySelector("[data-brx-ls-wrapper] > .brxe-container").removeEventListener("scroll",a,!1))}));let o=e.querySelector("input[data-brx-filter]");if(e.hasAttribute("data-search-redirect")&&o){let d=e.querySelector("[data-x-search]").getAttribute("data-x-search"),i=d?JSON.parse(d):{};o.addEventListener("keydown",e=>{if("Enter"===e.key){let r=o.value,t=window.location.origin,a=encodeURIComponent(r).replace(/%20/g,"+");null!=i.postTypes&&i.postTypes.forEach(e=>{a+="&"+encodeURIComponent("post_type[]")+"="+e});let s=`${t}/?s=${a}`;window.location.replace(s)}})}})}document.addEventListener("DOMContentLoaded",function(e){bricksIsFrontend&&xHeaderSearch()});